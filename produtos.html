<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KM ‚Äî Produtos</title>

  <link rel="stylesheet" href="assets/styles.css" />
  <link rel="stylesheet" href="assets/km.css" />
  <style>
    /* ==== MELHORIAS MOBILE FILTROS ==== */
    @media (max-width: 920px) {
      .km-prod-filters {
        position: fixed;
        top: 0;
        right: 0;
        height: 100vh;
        width: 80%;
        max-width: 320px;
        background: rgba(255,255,255,0.98);
        box-shadow: -2px 0 12px rgba(0,0,0,0.2);
        transform: translateX(100%);
        transition: transform 0.3s ease;
        padding: 1.2rem;
        z-index: 999;
        overflow-y: auto;
        border-radius: 12px 0 0 12px;
      }

      .km-prod-filters.show-mobile {
        transform: translateX(0);
      }

      .km-btn-close-filters {
        display: block;
        background: #0b1a33;
        color: #fff;
        border: none;
        font-size: 1rem;
        border-radius: 8px;
        padding: 0.6rem 1rem;
        margin-bottom: 1rem;
        width: 100%;
        cursor: pointer;
      }

      .km-prod-filters h2 {
        margin-top: 0;
        text-align: center;
        color: #0b1a33;
        font-weight: 700;
      }

      .km-filter-block h3 {
        color: #0b1a33;
        margin-bottom: 0.4rem;
        font-size: 1rem;
      }

      .km-btn-filter-mobile {
        background: #0b1a33;
        color: #fff;
        padding: 0.6rem 1.2rem;
        border-radius: 8px;
        font-size: 1rem;
        border: none;
        cursor: pointer;
      }
    }
  </style>
</head>
<body>
  <!-- HEADER IGUAL AO INDEX -->
  <header class="km-topbar">
    <div class="km-topbar-inner">
      <a href="admin.html" class="km-logo">
        <img src="assets/km-logo.jpg" alt="KM">
      </a>
      <nav class="km-nav-desktop">
        <a href="index.html">In√≠cio</a>
        <a href="sobre.html">Sobre n√≥s</a>
        <a href="produtos.html" class="active">Produtos</a>
        <a href="onde-comprar.html">Onde comprar</a>
        <a href="garantia.html">Garantia</a>
      </nav>
      <button class="km-hamburger" id="kmHamburger" aria-label="Abrir menu">
        <span></span><span></span><span></span>
      </button>
    </div>
    <div class="km-search-wrap">
      <input type="search" id="kmSearch" placeholder="Pesquisar produtos..." />
      <button id="kmSearchBtn">üîç</button>
    </div>
  </header>

  <!-- DRAWER MOBILE -->
  <aside class="km-drawer" id="kmDrawer">
    <div class="km-drawer-head">
      <img src="assets/km-logo.jpg" alt="KM">
      <button id="kmDrawerClose" aria-label="Fechar">√ó</button>
    </div>
    <nav class="km-drawer-nav">
      <a href="index.html">In√≠cio</a>
      <a href="sobre.html">Sobre n√≥s</a>
      <a href="produtos.html">Produtos</a>
      <a href="onde-comprar.html">Onde comprar</a>
      <a href="garantia.html">Garantia</a>
      <a href="admin.html">Painel admin</a>
    </nav>
  </aside>
  <div class="km-overlay" id="kmOverlay"></div>

  <!-- CONTE√öDO -->
  <main class="km-page km-prod-page">
    <div class="km-prod-head">
      <div>
        <h1>Todos os produtos</h1>
        <p id="kmProdCount">Carregando...</p>
      </div>
      <button class="km-btn-filter-mobile" id="kmOpenFilters">Filtros</button>
    </div>

    <div class="km-prod-layout">
      <!-- LATERAL DE FILTROS -->
      <aside class="km-prod-filters" id="kmFilters">
        <button class="km-btn-close-filters" id="kmCloseFilters">Fechar filtros ‚úï</button>
        <h2>Filtrar por</h2>

        <div class="km-filter-block">
          <h3>Categorias</h3>
          <ul id="kmFilterCategorias"></ul>
        </div>

        <div class="km-filter-block">
          <h3>Marcas</h3>
          <ul id="kmFilterMarcas"></ul>
        </div>

        <div class="km-filter-block">
          <h3>Tipo</h3>
          <label><input type="checkbox" value="exclusivo" id="kmFilterExclusivo"> Exclusivos</label>
          <label><input type="checkbox" value="novo" id="kmFilterNovo"> Itens novos</label>
        </div>

        <button id="kmClearFilters" class="km-btn-clear">Limpar filtros</button>
      </aside>

      <!-- LISTA DE PRODUTOS -->
      <section class="km-prod-list" id="kmProdList">
        <!-- cards via js -->
      </section>
    </div>
  </main>

  <!-- MODAL DE DETALHES DO PRODUTO -->
  <div id="kmModalOverlay" class="km-modal-overlay" style="display:none;">
    <div class="km-modal">
      <button id="kmModalClose" class="km-modal-close" aria-label="Fechar">√ó</button>
      <div class="km-modal-body">
        <div class="km-modal-media km-zoom">
          <img id="kmModalImg" src="assets/b1.svg" alt="Produto KM">
        </div>
        <div class="km-modal-content">
          <h2 id="kmModalTitle">Produto KM</h2>
          <p id="kmModalDesc" class="km-modal-desc">Descri√ß√£o do produto vai aparecer aqui.</p>
          <h3 class="km-modal-subtitle">Especifica√ß√µes</h3>
          <ul id="kmModalSpecs" class="km-modal-specs"></ul>
          <div class="km-modal-tags" id="kmModalTags"></div>
        </div>
      </div>
    </div>
  </div>

  <footer class="km-footer">
    <p class="km-copy">¬© 2025 KM ‚Äî Todos os direitos reservados.</p>
  </footer>

  <!-- FIREBASE -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="assets/config.js"></script>

  <!-- JS -->
  <script src="assets/produtos-km.js"></script>

  <script>
    // Drawer
    const hb = document.getElementById('kmHamburger');
    const drawer = document.getElementById('kmDrawer');
    const overlay = document.getElementById('kmOverlay');
    const btnClose = document.getElementById('kmDrawerClose');

    function openDrawer(){ drawer.classList.add('open'); overlay.classList.add('show'); }
    function closeDrawer(){ drawer.classList.remove('open'); overlay.classList.remove('show'); }

    if (hb) hb.onclick = openDrawer;
    if (overlay) overlay.onclick = closeDrawer;
    if (btnClose) btnClose.onclick = closeDrawer;

    // Filtros mobile
    const openFilters = document.getElementById('kmOpenFilters');
    const closeFilters = document.getElementById('kmCloseFilters');
    const filters = document.getElementById('kmFilters');

    if (openFilters && filters){
      openFilters.addEventListener('click', ()=> {
        filters.classList.add('show-mobile');
      });
    }
    if (closeFilters && filters){
      closeFilters.addEventListener('click', ()=> {
        filters.classList.remove('show-mobile');
      });
    }
  </script>
</body>
</html>
